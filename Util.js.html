<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: Util.js</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/nav.js"></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link type="text/css" rel="stylesheet" href="styles/skyceil.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
</head>

<body>

<nav class="navbar">
    <h4><a href="index.html">Home</a></h4><h5 class="no-bottom must-underline">Classes</h5><ul><li><span class="small-icon C">C</span><b><a href="Base.html">Base</a></b><ul class="has-class-methods"><li><span class="small-icon M">M</span><a href="Base.html#dbURL">dbURL</a></li><li><span class="small-icon M">M</span><a href="Base.html#options">options</a></li><li><span class="small-icon M">M</span><a href="Base.html#readyAt">readyAt</a></li><li><span class="small-icon M">M</span><a href="Base.html#url">url</a></li></ul></li><li><span class="small-icon C">C</span><b><a href="Database.html">Database</a></b><ul class="has-class-methods"><li><span class="small-icon F">F</span><a href="Database.html#_eval">_eval</a></li><li><span class="small-icon F">F</span><a href="Database.html#add">add</a></li><li><span class="small-icon F">F</span><a href="Database.html#all">all</a></li><li><span class="small-icon F">F</span><a href="Database.html#connect">connect</a></li><li><span class="small-icon F">F</span><a href="Database.html#delete">delete</a></li><li><span class="small-icon F">F</span><a href="Database.html#deleteAll">deleteAll</a></li><li><span class="small-icon F">F</span><a href="Database.html#disconnect">disconnect</a></li><li><span class="small-icon F">F</span><a href="Database.html#exists">exists</a></li><li><span class="small-icon F">F</span><a href="Database.html#export">export</a></li><li><span class="small-icon F">F</span><a href="Database.html#fetch">fetch</a></li><li><span class="small-icon F">F</span><a href="Database.html#fetchLatency">fetchLatency</a></li><li><span class="small-icon F">F</span><a href="Database.html#get">get</a></li><li><span class="small-icon F">F</span><a href="Database.html#has">has</a></li><li><span class="small-icon F">F</span><a href="Database.html#import">import</a></li><li><span class="small-icon F">F</span><a href="Database.html#keyArray">keyArray</a></li><li><span class="small-icon F">F</span><a href="Database.html#math">math</a></li><li><span class="small-icon F">F</span><a href="Database.html#ping">ping</a></li><li><span class="small-icon F">F</span><a href="Database.html#pull">pull</a></li><li><span class="small-icon F">F</span><a href="Database.html#push">push</a></li><li><span class="small-icon F">F</span><a href="Database.html#set">set</a></li><li><span class="small-icon F">F</span><a href="Database.html#startsWith">startsWith</a></li><li><span class="small-icon F">F</span><a href="Database.html#subtract">subtract</a></li><li><span class="small-icon F">F</span><a href="Database.html#toString">toString</a></li><li><span class="small-icon F">F</span><a href="Database.html#type">type</a></li><li><span class="small-icon F">F</span><a href="Database.html#valueArray">valueArray</a></li><li><span class="small-icon M">M</span><a href="Database.html#name">name</a></li><li><span class="small-icon M">M</span><a href="Database.html#schema">schema</a></li><li><span class="small-icon M">M</span><a href="Database.html#uptime">uptime</a></li></ul></li><li><span class="small-icon C">C</span><b><a href="MemoryStorage.html">MemoryStorage</a></b><ul class="has-class-methods"><li><span class="small-icon F">F</span><a href="MemoryStorage.html#all">all</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#delete">delete</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#deleteAll">deleteAll</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#exists">exists</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#export">export</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#fetch">fetch</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#get">get</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#has">has</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#set">set</a></li><li><span class="small-icon F">F</span><a href="MemoryStorage.html#startsWith">startsWith</a></li></ul></li><li><span class="small-icon C">C</span><b><a href="Util.html">Util</a></b><ul class="has-class-methods"><li><span class="small-icon F">F</span><a href="Util.html#.getData">getData</a></li><li><span class="small-icon F">F</span><a href="Util.html#.isKey">isKey</a></li><li><span class="small-icon F">F</span><a href="Util.html#.isValue">isValue</a></li><li><span class="small-icon F">F</span><a href="Util.html#.parseKey">parseKey</a></li><li><span class="small-icon F">F</span><a href="Util.html#.setData">setData</a></li><li><span class="small-icon F">F</span><a href="Util.html#.sort">sort</a></li><li><span class="small-icon F">F</span><a href="Util.html#.unsetData">unsetData</a></li></ul></li></ul><h5 class="no-bottom must-underline">Events</h5><ul><li><span class="small-icon E">E</span><a href="Base.html#event:debug">debug</a></li><li><span class="small-icon E">E</span><a href="Base.html#event:error">error</a></li><li><span class="small-icon E">E</span><a href="Base.html#event:ready">ready</a></li></ul>
</nav>

<div id="main">
    <div class="burger">
        <div class="burger-line-1"></div>
        <div class="burger-line-2"></div>
        <div class="burger-line-3"></div>
    </div>

    <h1 class="page-title">Source: Util.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const _ = require("lodash");
const Error = require("./Error");

class Util {

    /**
     * **You _cannot instantiate_ Util class. Every methods of this class are `static` methods.**
     * @example Util.method(...)
     */
    constructor() {
        throw new Error(`Class ${this.constructor.name} may not be instantiated!`);
    }

    /**
     * Returns true if provided key is valid
     * @param {any} str Anything to test
     * @returns {Boolean}
     */
    static isKey(str) {
        return typeof str === "string";
    }

    /**
     * Returns true if the given data is valid
     * @param {any} data Any data
     * @returns {Boolean}
     */
    static isValue(data) {
        if (data === Infinity || data === -Infinity) return false;
        if (typeof data === "undefined") return false;
        return true;
    }

    /**
     * Returns target &amp; key from the given string (quickdb style)
     * @param {string} key key to parse
     * @example Util.parseKey("myitem.items");
     * // -> { key: "myitems", target: "items" }
     */
    static parseKey(key) {
        if (!key || typeof key !== "string") return { key: undefined, target: undefined };
        if (key.includes(".")) {
            let spl = key.split(".");
            let parsed = spl.shift();
            let target = spl.join(".");
            return { key: parsed, target };
        }
        return { key, target: undefined };
    }

    /**
     * Sort data
     * @param {string} key Key
     * @param {Array} data Data
     * @param {object} ops options
     * @example Util.sort("user_", {...}, { sort: ".data" });
     */
    static sort(key, data, ops) {
        if (!key || !data || !Array.isArray(data)) return [];
        let arb = data.filter(i => i.ID.startsWith(key));
        if (ops.sort &amp;&amp; typeof ops.sort === 'string') {
            if (ops.sort.startsWith('.')) ops.sort = ops.sort.slice(1);
            ops.sort = ops.sort.split('.');
            arb = _.sortBy(arb, ops.sort).reverse();
        }
        return arb;
    }

    /**
     * Data resolver
     * @param {string} key Data key
     * @param {any} data Data
     * @param {any} value value
     * @example Util.setData("user.items", {...}, ["pen"]);
     */
    static setData(key, data, value) {
        let parsed = this.parseKey(key);
        if (typeof data === "object" &amp;&amp; parsed.target) {
            return _.set(data, parsed.target, value);
        } else if (parsed.target) throw new Error("Cannot target non-object.", "SyntaxError");
        return data;
    }

    /**
     * Data resolver
     * @param {string} key Data key
     * @param {any} data Data
     * @param {any} value value
     * @example Util.unsetData("user.items", {...});
     */
    static unsetData(key, data) {
        let parsed = this.parseKey(key);
        let item = data;
        if (typeof data === "object" &amp;&amp; parsed.target) {
            _.unset(item, parsed.target);
        } else if (parsed.target) throw new Error("Cannot target non-object.", "SyntaxError");
        return item;
    }

    /**
     * Data resolver
     * @param {string} key Key
     * @param {any} data Data
     * @example Util.getData("user.items", {...});
     */
    static getData(key, data) {
        let parsed = this.parseKey(key);
        if (parsed.target) data = _.get(data, parsed.target);
        return data;
    }
}

module.exports = Util;</code></pre>
        </article>
    </section>





</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Mon Jul 27 2020 19:30:30 GMT+0545 (Nepal Time) using <a href="https://github.com/zyrouge/jsdoc-skyceil">Skyceil Theme</a>
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>

</body>
</html>
